<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
	<title>UnCodeX - Source: ROEngine.ROHintManager</title>
	<meta name="Generator" content="UnCodeX 241" />
	<link rel="stylesheet" href="../DocStyle2.css" type="text/css" title="Original Purple" />
	<link rel="alternative stylesheet" href="../DocStyle2-blue.css" type="text/css" title="Blue" />
	<link rel="alternative stylesheet" href="../DocStyle2-red.css" type="text/css" title="Red" />
	<!--[if IE]>
	<link rel="stylesheet" href="../DocStyle2-msie.css" type="text/css" />
	<![endif]-->
	<script src="../styleswitcher.js" type="text/javascript"></script>
</head>
<body>

<div class="header">
<table class="header">
<tr class="header">
	<td class="header"><a href="../overview.html">Overview</a></td>
	<td class="header"><a href="../roengine/roengine-overview.html">Package</a></td>
	<td class="header"><a href="../roengine/rohintmanager.html">Class</a></td>
	<td class="header_hilight">Source</td>
	<td class="header"><a class="header" href="../classtree.html#ROHintManager">Class tree</a></td>
	<td class="header"><a class="header" href="../glossary_A.html">Glossary</a></td>
	<td class="logo" rowspan="2">UnrealScript<br />Documentation</td>
</tr>
<tr>
	<td class="subheader" colspan="3"><a href="../Source_roengine/roheadgear.html">previous class</a> &nbsp;&nbsp;&nbsp;&nbsp; <a href="../Source_roengine/rohovercraft.html">next class</a></td>
	<td class="subheader" colspan="2"><a href="../index.html#Source_roengine/rohintmanager.html" target="_top">frames</a> &nbsp;&nbsp;&nbsp;&nbsp; <a href="" target="_top">no frames</a></td>
</tr>
</table>
</div>
<div class="spacer"></div>

<h1><a href="../roengine/roengine-overview.html">ROEngine</a>.<a href="../roengine/rohintmanager.html">ROHintManager</a></h1>
<br />
<div class="source"><table class="source"><tr><td class="source_lineno"><span class="source_lineno">00001<br />00002<br />00003<br />00004<br />00005<br />00006<br />00007<br />00008<br />00009<br />00010<br />00011<br />00012<br />00013<br />00014<br />00015<br />00016<br />00017<br />00018<br />00019<br />00020<br />
00021<br />00022<br />00023<br />00024<br />00025<br />00026<br />00027<br />00028<br />00029<br />00030<br />00031<br />00032<br />00033<br />00034<br />00035<br />00036<br />00037<br />00038<br />00039<br />00040<br />
00041<br />00042<br />00043<br />00044<br />00045<br />00046<br />00047<br />00048<br />00049<br />00050<br />00051<br />00052<br />00053<br />00054<br />00055<br />00056<br />00057<br />00058<br />00059<br />00060<br />
00061<br />00062<br />00063<br />00064<br />00065<br />00066<br />00067<br />00068<br />00069<br />00070<br />00071<br />00072<br />00073<br />00074<br />00075<br />00076<br />00077<br />00078<br />00079<br />00080<br />
00081<br />00082<br />00083<br />00084<br />00085<br />00086<br />00087<br />00088<br />00089<br />00090<br />00091<br />00092<br />00093<br />00094<br />00095<br />00096<br />00097<br />00098<br />00099<br />00100<br />
00101<br />00102<br />00103<br />00104<br />00105<br />00106<br />00107<br />00108<br />00109<br />00110<br />00111<br />00112<br />00113<br />00114<br />00115<br />00116<br />00117<br />00118<br />00119<br />00120<br />
00121<br />00122<br />00123<br />00124<br />00125<br />00126<br />00127<br />00128<br />00129<br />00130<br />00131<br />00132<br />00133<br />00134<br />00135<br />00136<br />00137<br />00138<br />00139<br />00140<br />
00141<br />00142<br />00143<br />00144<br />00145<br />00146<br />00147<br />00148<br />00149<br />00150<br />00151<br />00152<br />00153<br />00154<br />00155<br />00156<br />00157<br />00158<br />00159<br />00160<br />
00161<br />00162<br />00163<br />00164<br />00165<br />00166<br />00167<br />00168<br />00169<br />00170<br />00171<br />00172<br />00173<br />00174<br />00175<br />00176<br />00177<br />00178<br />00179<br />00180<br />
00181<br />00182<br />00183<br />00184<br />00185<br />00186<br />00187<br />00188<br />00189<br />00190<br />00191<br />00192<br />00193<br />00194<br />00195<br />00196<br />00197<br />00198<br />00199<br />00200<br />
00201<br />00202<br />00203<br />00204<br />00205<br />00206<br />00207<br />00208<br />00209<br />00210<br />00211<br />00212<br />00213<br />00214<br />00215<br />00216<br />00217<br />00218<br />00219<br />00220<br />
00221<br />00222<br />00223<br />00224<br />00225<br />00226<br />00227<br />00228<br />00229<br />00230<br />00231<br />00232<br />00233<br />00234<br />00235<br />00236<br />00237<br />00238<br />00239<br />00240<br />
00241<br />00242<br />00243<br />00244<br />00245<br />00246<br />00247<br />00248<br />00249<br />00250<br />00251<br />00252<br />00253<br />00254<br />00255<br />00256<br />00257<br />00258<br />00259<br />00260<br />
00261<br />00262<br />00263<br />00264<br />00265<br />00266<br />00267<br />00268<br />00269<br />00270<br />00271<br />00272<br />00273<br />00274<br />00275<br />00276<br />00277<br />00278<br />00279<br />00280<br />
00281<br />00282<br />00283<br />00284<br />00285<br />00286<br />00287<br />00288<br />00289<br />00290<br />00291<br />00292<br />00293<br />00294<br />00295<br />00296<br />00297<br />00298<br />00299<br />00300<br />
00301<br />00302<br />00303<br />00304<br />00305<br />00306<br />00307<br />00308<br />00309<br />00310<br />00311<br />00312<br />00313<br />00314<br />00315<br />00316<br />00317<br />00318<br />00319<br />00320<br />
00321<br />00322<br />00323<br />00324<br />00325<br />00326<br />00327</span></td>
<td class="source"><pre class="source"><a name="1"></a><span class="source_comment">//=============================================================================
</span><a name="2"></a><span class="source_comment">// ROHintManager
</span><a name="3"></a><span class="source_comment">//=============================================================================
</span><a name="4"></a><span class="source_comment">// This class manages (most) of the hinting system stuff. It is spawned and
</span><a name="5"></a><span class="source_comment">// referenced in ROPlayer. It also interfaces with ROHud to display the hints
</span><a name="6"></a><span class="source_comment">// on screen. Finally, config variables are used to
</span><a name="7"></a><span class="source_comment">//=============================================================================
</span><a name="8"></a><span class="source_comment">// Red Orchestra Source
</span><a name="9"></a><span class="source_comment">// Copyright (C) 2005 Mathieu Mallet
</span><a name="10"></a><span class="source_comment">//=============================================================================
</span><a name="11"></a>
<a name="12"></a><span class="source_type">class</span> <span class="source_type"><a href="../roengine/rohintmanager.html" class="source">ROHintManager</a></span> extends <span class="source_type"><a href="../engine/info.html" class="source">Info</a></span>
<a name="13"></a>    config(<span class="source_type">User</span>);
<a name="14"></a>
<a name="15"></a><span class="source_comment">// Data structures
</span><a name="16"></a>struct <span class="source_type"><a href="../roengine/rohintmanager.html#HintInfo" class="source">HintInfo</a></span>
<a name="17"></a>{
<a name="18"></a>    var() <span class="source_type">int</span>                   <span class="source_type">type</span>;
<a name="19"></a>    var() <span class="source_type">int</span>                   priority; <span class="source_comment">// 1 = highest priority, 2 = lower than 0, etc
</span><a name="20"></a>    var() <span class="source_type">int</span>                   delay; <span class="source_comment">// how many seconds to wait before displaying the hint
</span><a name="21"></a>    var() localized <span class="source_type">string</span>      title;
<a name="22"></a>    var() localized <span class="source_type">string</span>      hint;   <span class="source_comment">// actual hint text
</span><a name="23"></a>    var <span class="source_type">int</span>                     <span class="source_type">index</span>; <span class="source_comment">// set in code, do not use!
</span><a name="24"></a>};
<a name="25"></a>
<a name="26"></a><span class="source_comment">// Constants
</span><a name="27"></a>const                           MAX_HINT_TYPES = <span class="source_int">25</span>;
<a name="28"></a>const                           MAX_HINTS = <span class="source_int">50</span>;
<a name="29"></a>
<a name="30"></a><span class="source_comment">// config variables
</span><a name="31"></a>var()   <span class="source_type">float</span>                   PostHintDisplayDelay;           <span class="source_comment">// How long to wait before displaying any other hint (value higher than 0 needed)
</span><a name="32"></a>var()   <span class="source_type">float</span>                   SameHintTypePostDisplayDelay;   <span class="source_comment">// How long to wait before authorizing a hint from same type to be displayed (value higher than 0 needed)
</span><a name="33"></a>var()   <span class="source_type"><a href="../roengine/rohintmanager.html#HintInfo" class="source">HintInfo</a></span>                Hints[MAX_HINTS];
<a name="34"></a>var     config  <span class="source_type">int</span>             bUsedUpHints[MAX_HINTS]; <span class="source_comment">// 0 = hint unused, 1 = hint used before
</span><a name="35"></a>var     <span class="source_type">float</span>                   RandomHintTimerDelay;
<a name="36"></a>
<a name="37"></a><span class="source_comment">// Hints array
</span><a name="38"></a>var     <span class="source_type">int</span>                     HintsAvailableByType[MAX_HINT_TYPES];
<a name="39"></a>var     array&lt;<span class="source_type"><a href="../roengine/rohintmanager.html#HintInfo" class="source">HintInfo</a></span>&gt;         SortedHints;
<a name="40"></a>
<a name="41"></a><span class="source_comment">// State variables
</span><a name="42"></a>var     <span class="source_type"><a href="../roengine/rohintmanager.html#HintInfo" class="source">HintInfo</a></span>                CurrentHint; <span class="source_comment">// Copy of hint for convenience
</span><a name="43"></a>var     <span class="source_type">int</span>                     CurrentHintIndex; <span class="source_comment">// Index in the SortedHints array
</span><a name="44"></a>var     <span class="source_type">float</span>                   LastHintDisplayTime;
<a name="45"></a>var     <span class="source_type">int</span>                     LastHintType;
<a name="46"></a>
<a name="47"></a>
<a name="48"></a>function PostBeginPlay()
<a name="49"></a>{
<a name="50"></a>    super.PostBeginPlay();
<a name="51"></a>    LastHintType = -<span class="source_int">1</span>;
<a name="52"></a>    LoadHints();
<a name="53"></a>}
<a name="54"></a>
<a name="55"></a>static function StaticReset()
<a name="56"></a>{
<a name="57"></a>    local <span class="source_type">int</span> <span class="source_type">i</span>;
<a name="58"></a>    for (<span class="source_type">i</span> = <span class="source_int">0</span>; <span class="source_type">i</span> &lt; MAX_HINT_TYPES; <span class="source_type">i</span>++)
<a name="59"></a>        default.bUsedUpHints[<span class="source_type">i</span>] = <span class="source_int">0</span>;
<a name="60"></a>    StaticSaveConfig();
<a name="61"></a>}
<a name="62"></a>
<a name="63"></a>function NonStaticReset()
<a name="64"></a>{
<a name="65"></a>    local <span class="source_type">int</span> <span class="source_type">i</span>;
<a name="66"></a>    for (<span class="source_type">i</span> = <span class="source_int">0</span>; <span class="source_type">i</span> &lt; MAX_HINT_TYPES; <span class="source_type">i</span>++)
<a name="67"></a>        bUsedUpHints[<span class="source_type">i</span>] = <span class="source_int">0</span>;
<a name="68"></a>    SaveConfig();
<a name="69"></a>    Reload();
<a name="70"></a>}
<a name="71"></a>
<a name="72"></a>function Reload()
<a name="73"></a>{
<a name="74"></a>    StopHinting();
<a name="75"></a>    LoadHints();
<a name="76"></a>}
<a name="77"></a>
<a name="78"></a>function LoadHints()
<a name="79"></a>{
<a name="80"></a>    local <span class="source_type">int</span> <span class="source_type">i</span>, j, <span class="source_type">index</span>, priority;
<a name="81"></a>
<a name="82"></a>    <span class="source_comment">// Initialize arrays to 0
</span><a name="83"></a>    SortedHints.Length = <span class="source_int">0</span>;
<a name="84"></a>    for (<span class="source_type">i</span> = <span class="source_int">0</span>; <span class="source_type">i</span> &lt; MAX_HINT_TYPES; <span class="source_type">i</span>++)
<a name="85"></a>        HintsAvailableByType[<span class="source_type">i</span>] = <span class="source_int">0</span>;
<a name="86"></a>
<a name="87"></a>    <span class="source_comment">// Sort hints in the SortedHints by priority -- highest priority hints
</span><a name="88"></a>    <span class="source_comment">// get placed first. At same time, build array of available hints
</span><a name="89"></a>    <span class="source_comment">// using id of used hints
</span><a name="90"></a>    for (<span class="source_type">i</span> = <span class="source_int">0</span>; <span class="source_type">i</span> &lt; MAX_HINT_TYPES; <span class="source_type">i</span>++)
<a name="91"></a>    {
<a name="92"></a>        Hints[<span class="source_type">i</span>].<span class="source_type">index</span> = <span class="source_type">i</span>;
<a name="93"></a>
<a name="94"></a>        <span class="source_comment">// Check if we should add this hint
</span><a name="95"></a>        if (bUsedUpHints[<span class="source_type">i</span>] == <span class="source_int">0</span> && Hints[<span class="source_type">i</span>].title != <span class="source_string">""</span>)
<a name="96"></a>        {
<a name="97"></a>            HintsAvailableByType[Hints[<span class="source_type">i</span>].<span class="source_type">type</span>]++;
<a name="98"></a>
<a name="99"></a>            <span class="source_comment">// Find where we should insert the new hint
</span><a name="100"></a>            priority = Hints[<span class="source_type">i</span>].priority;
<a name="101"></a>            <span class="source_type">index</span> = -<span class="source_int">1</span>;
<a name="102"></a>            for (j = <span class="source_int">0</span>; j &lt; SortedHints.Length; j++)
<a name="103"></a>                if (SortedHints[j].priority &gt;= priority)
<a name="104"></a>                {
<a name="105"></a>                    <span class="source_type">index</span> = j;
<a name="106"></a>                    break;
<a name="107"></a>                }
<a name="108"></a>
<a name="109"></a>            <span class="source_comment">// Add hint to proper position
</span><a name="110"></a>            if (<span class="source_type">index</span> == -<span class="source_int">1</span>)
<a name="111"></a>                SortedHints[SortedHints.Length] = Hints[<span class="source_type">i</span>];
<a name="112"></a>            else
<a name="113"></a>            {
<a name="114"></a>                SortedHints.Insert(<span class="source_type">index</span>, <span class="source_int">1</span>);
<a name="115"></a>                SortedHints[<span class="source_type">index</span>] = Hints[<span class="source_type">i</span>];
<a name="116"></a>            }
<a name="117"></a>        }
<a name="118"></a>    }
<a name="119"></a>}
<a name="120"></a>
<a name="121"></a>
<a name="122"></a>function CheckForHint(<span class="source_type">int</span> hintType)
<a name="123"></a>{
<a name="124"></a>    local <span class="source_type">int</span> <span class="source_type">i</span>;
<a name="125"></a>
<a name="126"></a>    if (HintsAvailableByType[hintType] == <span class="source_int">0</span>)
<a name="127"></a>        return;
<a name="128"></a>
<a name="129"></a>    <span class="source_comment">// Check if we're allowed to display a hint of this type at this time
</span><a name="130"></a>    if (LastHintType == hintType)
<a name="131"></a>        if (<span class="source_type">level</span>.TimeSeconds - LastHintDisplayTime &lt; SameHintTypePostDisplayDelay)
<a name="132"></a>            return;
<a name="133"></a>
<a name="134"></a>    <span class="source_comment">// We have available hints! Search array for first non-used hint of that type.
</span><a name="135"></a>    <span class="source_comment">// (first == highest priority)
</span><a name="136"></a>    for (<span class="source_type">i</span> = <span class="source_int">0</span>; <span class="source_type">i</span> &lt; SortedHints.Length; <span class="source_type">i</span>++)
<a name="137"></a>    {
<a name="138"></a>        if (SortedHints[<span class="source_type">i</span>].<span class="source_type">type</span> == hintType)
<a name="139"></a>        {
<a name="140"></a>            CurrentHint = SortedHints[<span class="source_type">i</span>];
<a name="141"></a>            CurrentHintIndex = <span class="source_type">i</span>;
<a name="142"></a>            SetTimer(<span class="source_int">0</span>, false);
<a name="143"></a>            GotoState(<span class="source_name">'PreHintDelay'</span>);
<a name="144"></a>            return;
<a name="145"></a>        }
<a name="146"></a>    }
<a name="147"></a>
<a name="148"></a>    <span class="source_comment">// If we got here it means that hint couldn't be found. wtf?
</span><a name="149"></a>    warn(<span class="source_string">"Unable to find hint type '"</span> $ hintType $ <span class="source_string">"' in SortedHints array, even though HintsAvailableByType"</span>
<a name="150"></a>        $ <span class="source_string">" indicates that there are "</span> $ HintsAvailableByType[hintType] $ <span class="source_string">" hints of that type available!"</span>);
<a name="151"></a>}
<a name="152"></a>
<a name="153"></a>function StopHinting()
<a name="154"></a>{
<a name="155"></a>    GotoState(<span class="source_name">''</span>);
<a name="156"></a>    SetTimer(<span class="source_int">0</span>, false);
<a name="157"></a>}
<a name="158"></a>
<a name="159"></a><span class="source_comment">// Implemented in WaitHintDone state
</span><a name="160"></a>function NotifyHintRenderingDone() {}
<a name="161"></a>
<a name="162"></a><span class="source_comment">// Used to dump hint info to console
</span><a name="163"></a>function DumpHints()
<a name="164"></a>{
<a name="165"></a>    local <span class="source_type">int</span> <span class="source_type">i</span>;
<a name="166"></a>    log(<span class="source_string">"Hint availability list:"</span>);
<a name="167"></a>    for (<span class="source_type">i</span> = <span class="source_int">0</span>; <span class="source_type">i</span> &lt; MAX_HINT_TYPES; <span class="source_type">i</span>++)
<a name="168"></a>        log(<span class="source_string">"#"</span> $ <span class="source_type">i</span> $ <span class="source_string">" availability: "</span> $ HintsAvailableByType[<span class="source_type">i</span>]);
<a name="169"></a>    log(<span class="source_string">"Max number of hints in db: "</span> $ MAX_HINT_TYPES);
<a name="170"></a>    for (<span class="source_type">i</span> = <span class="source_int">0</span>; <span class="source_type">i</span> &lt; MAX_HINT_TYPES; <span class="source_type">i</span>++)
<a name="171"></a>        log(<span class="source_string">"#"</span> $ <span class="source_type">i</span> $ <span class="source_string">", type = "</span> $ hints[<span class="source_type">i</span>].<span class="source_type">type</span>
<a name="172"></a>            $ <span class="source_string">", pri = "</span> $ hints[<span class="source_type">i</span>].priority
<a name="173"></a>            $ <span class="source_string">", delay = "</span> $ hints[<span class="source_type">i</span>].delay
<a name="174"></a>            $ <span class="source_string">", used = "</span> $ bUsedUpHints[<span class="source_type">i</span>]
<a name="175"></a>            $ <span class="source_string">", title = '"</span> $ hints[<span class="source_type">i</span>].title $ <span class="source_string">"'"</span>
<a name="176"></a>            $ <span class="source_string">", text = '"</span> $ hints[<span class="source_type">i</span>].hint $ <span class="source_string">"'"</span>);
<a name="177"></a>    log(<span class="source_string">"Hints in sorted array: "</span> $ SortedHints.Length);
<a name="178"></a>    for (<span class="source_type">i</span> = <span class="source_int">0</span>; <span class="source_type">i</span> &lt; SortedHints.length; <span class="source_type">i</span>++)
<a name="179"></a>        log(<span class="source_string">"#"</span> $ <span class="source_type">i</span> $ <span class="source_string">", type = "</span> $ SortedHints[<span class="source_type">i</span>].<span class="source_type">type</span>
<a name="180"></a>            $ <span class="source_string">", pri = "</span> $ SortedHints[<span class="source_type">i</span>].priority
<a name="181"></a>            $ <span class="source_string">", delay = "</span> $ SortedHints[<span class="source_type">i</span>].delay
<a name="182"></a>            $ <span class="source_string">", used = "</span> $ bUsedUpHints[SortedHints[<span class="source_type">i</span>].<span class="source_type">index</span>]
<a name="183"></a>            $ <span class="source_string">", title = '"</span> $ SortedHints[<span class="source_type">i</span>].title $ <span class="source_string">"'"</span>
<a name="184"></a>            $ <span class="source_string">", text = '"</span> $ SortedHints[<span class="source_type">i</span>].hint $ <span class="source_string">"'"</span>);
<a name="185"></a>
<a name="186"></a>}
<a name="187"></a>
<a name="188"></a>simulated function Timer()
<a name="189"></a>{
<a name="190"></a>    CheckForHint(<span class="source_int">18</span>);
<a name="191"></a>}
<a name="192"></a>
<a name="193"></a><span class="source_comment">// This state is used when we want to show a hint.
</span><a name="194"></a><span class="source_type">state</span> PreHintDelay
<a name="195"></a>{
<a name="196"></a>    function BeginState()
<a name="197"></a>    {
<a name="198"></a>        if (CurrentHint.delay ~= <span class="source_int">0</span>)
<a name="199"></a>            GotoState(<span class="source_name">'WaitHintDone'</span>);
<a name="200"></a>        else
<a name="201"></a>            SetTimer(CurrentHint.delay, false);
<a name="202"></a>    }
<a name="203"></a>
<a name="204"></a>    <span class="source_comment">// Don't allow another hint to be scheduled when we have one scheduled already
</span><a name="205"></a>    function CheckForHint(<span class="source_type">int</span> hintType) {}
<a name="206"></a>
<a name="207"></a>    function Timer()
<a name="208"></a>    {
<a name="209"></a>        GotoState(<span class="source_name">'WaitHintDone'</span>);
<a name="210"></a>    }
<a name="211"></a>}
<a name="212"></a>
<a name="213"></a><span class="source_type">state</span> WaitHintDone
<a name="214"></a>{
<a name="215"></a>    function BeginState()
<a name="216"></a>    {
<a name="217"></a>        local <span class="source_type"><a href="../roengine/roplayer.html" class="source">ROPlayer</a></span> <span class="source_type"><a href="../engine/player.html" class="source">player</a></span>;
<a name="218"></a>        <span class="source_comment">// Tell ROHud to display the hint
</span><a name="219"></a>        <span class="source_type"><a href="../engine/player.html" class="source">player</a></span> = <span class="source_type"><a href="../roengine/roplayer.html" class="source">ROPlayer</a></span>(<span class="source_type">Owner</span>);
<a name="220"></a>        if (<span class="source_type"><a href="../engine/player.html" class="source">player</a></span> != none &&
<a name="221"></a>            <span class="source_type"><a href="../roengine/rohud.html" class="source">ROHud</a></span>(<span class="source_type"><a href="../engine/player.html" class="source">player</a></span>.myHud) != none &&
<a name="222"></a>            !<span class="source_type"><a href="../roengine/rohud.html" class="source">ROHud</a></span>(<span class="source_type"><a href="../engine/player.html" class="source">player</a></span>.myHud).bHideHud)
<a name="223"></a>        {
<a name="224"></a>            <span class="source_type"><a href="../roengine/rohud.html" class="source">ROHud</a></span>(<span class="source_type"><a href="../engine/player.html" class="source">player</a></span>.myHud).ShowHint(CurrentHint.title, CurrentHint.hint);
<a name="225"></a>        }
<a name="226"></a>        else
<a name="227"></a>        {
<a name="228"></a>            SetTimer(RandomHintTimerDelay, true);
<a name="229"></a>            GotoState(<span class="source_name">''</span>);
<a name="230"></a>        }
<a name="231"></a>    }
<a name="232"></a>
<a name="233"></a>    <span class="source_comment">// Don't allow another hint to be scheduled when we're displaying one already
</span><a name="234"></a>    function CheckForHint(<span class="source_type">int</span> hintType) {}
<a name="235"></a>
<a name="236"></a>    function NotifyHintRenderingDone()
<a name="237"></a>    {
<a name="238"></a>        <span class="source_comment">// Hurray, hint done rendering! Switch to post-hint state.
</span><a name="239"></a>        GotoState(<span class="source_name">'PostDisplay'</span>);
<a name="240"></a>    }
<a name="241"></a>}
<a name="242"></a>
<a name="243"></a><span class="source_type">state</span> PostDisplay
<a name="244"></a>{
<a name="245"></a>    function BeginState()
<a name="246"></a>    {
<a name="247"></a>        LastHintType = CurrentHint.<span class="source_type">type</span>;
<a name="248"></a>        LastHintDisplayTime = <span class="source_type">Level</span>.TimeSeconds;
<a name="249"></a>        SetTimer(PostHintDisplayDelay, false);
<a name="250"></a>    }
<a name="251"></a>
<a name="252"></a>    <span class="source_comment">// Don't allow another hint to be scheduled until post-display delay is completed.
</span><a name="253"></a>    function CheckForHint(<span class="source_type">int</span> hintType) {}
<a name="254"></a>
<a name="255"></a>    function Timer()
<a name="256"></a>    {
<a name="257"></a>        <span class="source_comment">// Mark this hint as used up
</span><a name="258"></a>        <span class="source_comment">//log("setting hint #" $ CurrentHint.index $ " as used up.");
</span><a name="259"></a>        bUsedUpHints[CurrentHint.<span class="source_type">index</span>] = <span class="source_int">1</span>;
<a name="260"></a>        SaveConfig();
<a name="261"></a>
<a name="262"></a>        <span class="source_comment">// Update hint availability list
</span><a name="263"></a>        HintsAvailableByType[CurrentHint.<span class="source_type">type</span>]--;
<a name="264"></a>
<a name="265"></a>        <span class="source_comment">// Remove current hint from hints list
</span><a name="266"></a>        <span class="source_comment">//log("Removing from sortedhints array. old length = " $ SortedHints.Length);
</span><a name="267"></a>        SortedHints.Remove(CurrentHintIndex, <span class="source_int">1</span>);
<a name="268"></a>        <span class="source_comment">//log("                                 new length = " $ SortedHints.Length);
</span><a name="269"></a>
<a name="270"></a>        <span class="source_comment">// Go back to 'idle' state
</span><a name="271"></a>        SetTimer(RandomHintTimerDelay, true);
<a name="272"></a>        GotoState(<span class="source_name">''</span>);
<a name="273"></a>    }
<a name="274"></a>}
<a name="275"></a>
<a name="276"></a>defaultproperties
<a name="277"></a>{
<a name="278"></a>     PostHintDisplayDelay=<span class="source_int">10.000000</span>
<a name="279"></a>     SameHintTypePostDisplayDelay=<span class="source_int">30.000000</span>
<a name="280"></a>     Hints(<span class="source_int">0</span>)=(Delay=<span class="source_int">3</span>,Title=<span class="source_string">"Welcome"</span>,Hint=<span class="source_string">"Welcome to Red Orchestra!||These hint messages will show up periodically in the game. Pay attention to them, your survival might depend on it! They can be disabled from the HUD tab in the configuration menu."</span>)
<a name="281"></a>     Hints(<span class="source_int">1</span>)=(<span class="source_type">Type</span>=<span class="source_int">18</span>,Priority=<span class="source_int">10</span>,Title=<span class="source_string">"Stamina"</span>,Hint=<span class="source_string">"Running or jumping will deplete your player's stamina. When it is depleted, you will be unable to run or jump until you have stopped for a bit to catch your breath."</span>)
<a name="282"></a>     Hints(<span class="source_int">2</span>)=(<span class="source_type">Type</span>=<span class="source_int">1</span>,Priority=<span class="source_int">1</span>,Delay=<span class="source_int">2</span>,Title=<span class="source_string">"Jumping"</span>,Hint=<span class="source_string">"Jumping quickly drains your player's stamina. Use in moderation!"</span>)
<a name="283"></a>     Hints(<span class="source_int">3</span>)=(<span class="source_type">Type</span>=<span class="source_int">18</span>,Priority=<span class="source_int">20</span>,Title=<span class="source_string">"Leaning"</span>,Hint=<span class="source_string">"Press %LeanRight% or %LeanLeft% to lean around corners. Leaning lets you peak around corners without exposing your whole body to the enemy."</span>)
<a name="284"></a>     Hints(<span class="source_int">4</span>)=(Priority=<span class="source_int">15</span>,Delay=<span class="source_int">3</span>,Title=<span class="source_string">"Role Selection"</span>,Hint=<span class="source_string">"You can change your weapons and role at any time by hitting the %SHOWMENU% key. The changes you make will take effect when you respawn."</span>)
<a name="285"></a>     Hints(<span class="source_int">5</span>)=(<span class="source_type">Type</span>=<span class="source_int">2</span>,Priority=<span class="source_int">10</span>,Delay=<span class="source_int">3</span>,Title=<span class="source_string">"Iron sights"</span>,Hint=<span class="source_string">"Press %ROIronSights% to aim down you weapon's sights. This substantially increases the accuracy of your weapon."</span>)
<a name="286"></a>     Hints(<span class="source_int">6</span>)=(<span class="source_type">Type</span>=<span class="source_int">2</span>,Priority=<span class="source_int">20</span>,Delay=<span class="source_int">3</span>,Title=<span class="source_string">"Accuracy"</span>,Hint=<span class="source_string">"Automatic weapons are most accurate when fired in short, controllable bursts."</span>)
<a name="287"></a>     Hints(<span class="source_int">7</span>)=(<span class="source_type">Type</span>=<span class="source_int">3</span>,Priority=<span class="source_int">10</span>,Delay=<span class="source_int">2</span>,Title=<span class="source_string">"Positions"</span>,Hint=<span class="source_string">"Use the number keys (%SWITCHWEAPON 1%, %SWITCHWEAPON 2%, %SWITCHWEAPON 3%, ...) to change between various positions in the vehicle."</span>)
<a name="288"></a>     Hints(<span class="source_int">8</span>)=(<span class="source_type">Type</span>=<span class="source_int">3</span>,Priority=<span class="source_int">15</span>,Delay=<span class="source_int">2</span>,Title=<span class="source_string">"Crew Members"</span>,Hint=<span class="source_string">"A fully crewed tank is more effective than one driven by a lone player. Try to pick up players along the way to your objectives."</span>)
<a name="289"></a>     Hints(<span class="source_int">9</span>)=(Priority=<span class="source_int">15</span>,Delay=<span class="source_int">3</span>,Title=<span class="source_string">"Situation Map"</span>,Hint=<span class="source_string">"You can see a map of the objectives that need to be captured or defended by pressing %SHOWOBJECTIVES%."</span>)
<a name="290"></a>     Hints(<span class="source_int">10</span>)=(<span class="source_type">Type</span>=<span class="source_int">4</span>,Priority=<span class="source_int">10</span>,Delay=<span class="source_int">2</span>,Title=<span class="source_string">"Weak Points"</span>,Hint=<span class="source_string">"Each tank has its weak points. Try aiming for the driver's window or the seam between the tank body and turret."</span>)
<a name="291"></a>     Hints(<span class="source_int">11</span>)=(<span class="source_type">Type</span>=<span class="source_int">4</span>,Priority=<span class="source_int">10</span>,Delay=<span class="source_int">2</span>,Title=<span class="source_string">"Ammo Types"</span>,Hint=<span class="source_string">"Press %SwitchFireMode% to switch between the various available tank ammo types."</span>)
<a name="292"></a>     Hints(<span class="source_int">12</span>)=(<span class="source_type">Type</span>=<span class="source_int">6</span>,Priority=<span class="source_int">10</span>,Delay=<span class="source_int">1</span>,Title=<span class="source_string">"Reloading"</span>,Hint=<span class="source_string">"Use the %ROManualReload% key to reload your weapon. A 'Magazine Heavy' message indicates that the magazine you're loading is more than half full of ammunition."</span>)
<a name="293"></a>     Hints(<span class="source_int">13</span>)=(<span class="source_type">Type</span>=<span class="source_int">9</span>,Priority=<span class="source_int">10</span>,Delay=<span class="source_int">1</span>,Title=<span class="source_string">"Soviet grenades"</span>,Hint=<span class="source_string">"To prime ('cook') Soviet grenades, press and hold the %FIRE%, then click the %ALTFIRE% button. Release the %FIRE% button when you are ready to throw the grenade. Be careful, if you cook it for too long it can go off in your hand!"</span>)
<a name="294"></a>     Hints(<span class="source_int">14</span>)=(<span class="source_type">Type</span>=<span class="source_int">8</span>,Priority=<span class="source_int">10</span>,Delay=<span class="source_int">1</span>,Title=<span class="source_string">"Rally Points"</span>,Hint=<span class="source_string">"When you have the binoculars in Iron Sights, use the %AltFire% button to set a Rally Point. Rally points are visible to all team members on their Situation Map."</span>)
<a name="295"></a>     Hints(<span class="source_int">15</span>)=(<span class="source_type">Type</span>=<span class="source_int">8</span>,Priority=<span class="source_int">15</span>,Delay=<span class="source_int">1</span>,Title=<span class="source_string">"Artillery Coordinates"</span>,Hint=<span class="source_string">"When you have the binoculars in Iron Sights, use the %Fire% button to save Artillery Strike coordinates. Once coordinates are marked, find a radio and press %USE% to call an artillery strike on the saved position."</span>)
<a name="296"></a>     Hints(<span class="source_int">16</span>)=(<span class="source_type">Type</span>=<span class="source_int">10</span>,Priority=<span class="source_int">15</span>,Delay=<span class="source_int">1</span>,Title=<span class="source_string">"Reloading MGs"</span>,Hint=<span class="source_string">"You can reload your Machine Gun ONLY when in the deployed state."</span>)
<a name="297"></a>     Hints(<span class="source_int">17</span>)=(<span class="source_type">Type</span>=<span class="source_int">10</span>,Priority=<span class="source_int">20</span>,Delay=<span class="source_int">1</span>,Title=<span class="source_string">"Requesting Resupply"</span>,Hint=<span class="source_string">"When you're running low on Machine Gun ammo, you can use the voice menu to request a resupply. Players will see the resupply icon on their Situation Map. Press %SpeechMenuToggle% to open the voice menu."</span>)
<a name="298"></a>     Hints(<span class="source_int">18</span>)=(<span class="source_type">Type</span>=<span class="source_int">10</span>,Priority=<span class="source_int">30</span>,Delay=<span class="source_int">1</span>,Title=<span class="source_string">"Deployed MGs"</span>,Hint=<span class="source_string">"Machine Gunners should never setup alone, find a comrade to watch your back."</span>)
<a name="299"></a>     Hints(<span class="source_int">19</span>)=(<span class="source_type">Type</span>=<span class="source_int">11</span>,Priority=<span class="source_int">10</span>,Delay=<span class="source_int">1</span>,Title=<span class="source_string">"Bayonet"</span>,Hint=<span class="source_string">"Many weapons support bayonet attachments. Press %Deploy% to attach or detach the bayonet to your weapon and %AltFire% to stab enemies with it."</span>)
<a name="300"></a>     Hints(<span class="source_int">20</span>)=(<span class="source_type">Type</span>=<span class="source_int">12</span>,Priority=<span class="source_int">10</span>,Delay=<span class="source_int">1</span>,Title=<span class="source_string">"Panzerfaust Aiming"</span>,Hint=<span class="source_string">"You can change the range that your Panzerfaust will target at by pressing the %Deploy% button. Match the distance of your enemy with the selected range displayed on the Panzerfaust sight."</span>)
<a name="301"></a>     Hints(<span class="source_int">21</span>)=(<span class="source_type">Type</span>=<span class="source_int">13</span>,Priority=<span class="source_int">10</span>,Delay=<span class="source_int">1</span>,Title=<span class="source_string">"Grenades"</span>,Hint=<span class="source_string">"Grenades have a dangerous blast radius - get under cover or away from them!"</span>)
<a name="302"></a>     Hints(<span class="source_int">22</span>)=(<span class="source_type">Type</span>=<span class="source_int">15</span>,Priority=<span class="source_int">10</span>,Delay=<span class="source_int">1</span>,Title=<span class="source_string">"Objectives Under Attack"</span>,Hint=<span class="source_string">"Objectives with a flashing icon are objectives which are under attack. Whether the objective is being attacked or defended by your team, they can probably use your help."</span>)
<a name="303"></a>     Hints(<span class="source_int">23</span>)=(<span class="source_type">Type</span>=<span class="source_int">14</span>,Priority=<span class="source_int">20</span>,Delay=<span class="source_int">1</span>,Title=<span class="source_string">"Rally Points"</span>,Hint=<span class="source_string">"Squad Leaders can set rally points by clicking on the Situation Map. Those rally points are visible to all team members on their Situation Map."</span>)
<a name="304"></a>     Hints(<span class="source_int">24</span>)=(<span class="source_type">Type</span>=<span class="source_int">14</span>,Priority=<span class="source_int">30</span>,Delay=<span class="source_int">1</span>,Title=<span class="source_string">"Orders & Requests"</span>,Hint=<span class="source_string">"Squad leaders can set attack/defend orders to specific objectives. Those objectives show up on the map with a different icon. Similarly, MGs requesting resupply will show up as an icon on the Situation Map."</span>)
<a name="305"></a>     Hints(<span class="source_int">25</span>)=(<span class="source_type">Type</span>=<span class="source_int">18</span>,Priority=<span class="source_int">40</span>,Title=<span class="source_string">"Resupplying MGs"</span>,Hint=<span class="source_string">"Use the %ThrowMGAmmo% to resupply Machine Gunners who need it."</span>)
<a name="306"></a>     Hints(<span class="source_int">26</span>)=(<span class="source_type">Type</span>=<span class="source_int">17</span>,Priority=<span class="source_int">20</span>,Delay=<span class="source_int">1</span>,Title=<span class="source_string">"Points"</span>,Hint=<span class="source_string">"You receive 10 points for helping to capture an objective."</span>)
<a name="307"></a>     Hints(<span class="source_int">27</span>)=(<span class="source_type">Type</span>=<span class="source_int">18</span>,Priority=<span class="source_int">30</span>,Title=<span class="source_string">"Capturing Objectives"</span>,Hint=<span class="source_string">"To capture an objective, you must first enter the objective area. A capture bar will appear on your HUD when you have entered the objective area. You'll likely need more than one additional teammate to initiate and complete the capture."</span>)
<a name="308"></a>     Hints(<span class="source_int">28</span>)=(<span class="source_type">Type</span>=<span class="source_int">2</span>,Priority=<span class="source_int">20</span>,Delay=<span class="source_int">3</span>,Title=<span class="source_string">"Accuracy"</span>,Hint=<span class="source_string">"Crouching and going prone stabilizes your weapon and lowers recoil when firing. Press the %duck% key to crouch, or the %prone% key to go prone."</span>)
<a name="309"></a>     Hints(<span class="source_int">29</span>)=(<span class="source_type">Type</span>=<span class="source_int">10</span>,Priority=<span class="source_int">30</span>,Delay=<span class="source_int">1</span>,Title=<span class="source_string">"Changing Barrels"</span>,Hint=<span class="source_string">"You can change the barrels on the MGs by using the %ROMGOperation%. Note that the barrel on the DP 28 cannot be changed, so be careful not to overheat!"</span>)
<a name="310"></a>     Hints(<span class="source_int">30</span>)=(<span class="source_type">Type</span>=<span class="source_int">17</span>,Priority=<span class="source_int">30</span>,Delay=<span class="source_int">1</span>,Title=<span class="source_string">"Officers"</span>,Hint=<span class="source_string">"When taking an objective, the presence of an officer boosts morale and makes your task easier!"</span>)
<a name="311"></a>     Hints(<span class="source_int">31</span>)=(Priority=<span class="source_int">15</span>,Delay=<span class="source_int">3</span>,Title=<span class="source_string">"Diving to Prone"</span>,Hint=<span class="source_string">"You can dive to prone by pressing %PRONE% while running, allowing you to quickly take cover. You can also use this to dive over small obstacles and take cover behind them."</span>)
<a name="312"></a>     Hints(<span class="source_int">32</span>)=(<span class="source_type">Type</span>=<span class="source_int">18</span>,Priority=<span class="source_int">40</span>,Title=<span class="source_string">"Attacking MGs"</span>,Hint=<span class="source_string">"Machine Gunners have a limited field of vision while deployed, so try attacking them from the side."</span>)
<a name="313"></a>     Hints(<span class="source_int">33</span>)=(<span class="source_type">Type</span>=<span class="source_int">2</span>,Priority=<span class="source_int">30</span>,Delay=<span class="source_int">3</span>,Title=<span class="source_string">"Weapon Deployment"</span>,Hint=<span class="source_string">"You can stabilize all projectile weapons by simply resting them on a horizontal or vertical surface. An icon will appear in the lower right corner of the screen if the surface is deployable."</span>)
<a name="314"></a>     Hints(<span class="source_int">34</span>)=(<span class="source_type">Type</span>=<span class="source_int">3</span>,Priority=<span class="source_int">30</span>,Delay=<span class="source_int">2</span>,Title=<span class="source_string">"Position Views"</span>,Hint=<span class="source_string">"Use the %PREVWEAPON% and %NEXTWEAPON% keys to cycle between the various views available for each vehicle position. Be careful when sticking your head out of the commander or driver hatch: you are then vulnerable to enemy fire."</span>)
<a name="315"></a>     Hints(<span class="source_int">35</span>)=(<span class="source_type">Type</span>=<span class="source_int">3</span>,Priority=<span class="source_int">20</span>,Delay=<span class="source_int">2</span>,Title=<span class="source_string">"Tank Control"</span>,Hint=<span class="source_string">"Use the movement keys to steer and control your vehicle's throttle. Use the %JUMP% key to brake."</span>)
<a name="316"></a>     Hints(<span class="source_int">36</span>)=(<span class="source_type">Type</span>=<span class="source_int">3</span>,Priority=<span class="source_int">40</span>,Delay=<span class="source_int">2</span>,Title=<span class="source_string">"Armor Usage"</span>,Hint=<span class="source_string">"When combating other tanks, remember that your armor is strongest at the front. Try to angle the front of your vehicle slightly away from enemy fire."</span>)
<a name="317"></a>     Hints(<span class="source_int">37</span>)=(<span class="source_type">Type</span>=<span class="source_int">4</span>,Priority=<span class="source_int">10</span>,Delay=<span class="source_int">2</span>,Title=<span class="source_string">"Cannon Fire Range"</span>,Hint=<span class="source_string">"Use the %LEANLEFT% and %LEANRIGHT% keys to adjust the range of your tank sights. The range you have your sights set to is displayed, in meters, in the lower right corner of the screen."</span>)
<a name="318"></a>     Hints(<span class="source_int">38</span>)=(<span class="source_type">Type</span>=<span class="source_int">4</span>,Priority=<span class="source_int">50</span>,Delay=<span class="source_int">2</span>,Title=<span class="source_string">"Coaxial MG"</span>,Hint=<span class="source_string">"Most tanks have a coaxial machine gun alongside the main gun. You can fire it from the commander's view by pressing %ALTFIRE%. Note: range adjustments have no effect on the coaxial MG."</span>)
<a name="319"></a>     Hints(<span class="source_int">39</span>)=(<span class="source_type">Type</span>=<span class="source_int">7</span>,Priority=<span class="source_int">10</span>,Delay=<span class="source_int">1</span>,Title=<span class="source_string">"Satchels"</span>,Hint=<span class="source_string">"Satchels contain high explosives. They are useful for destroying enemy vehicles and certain objectives. While not all maps have destroyable objectives, those that do have those objectives specially marked on the situation map."</span>)
<a name="320"></a>     Hints(<span class="source_int">40</span>)=(<span class="source_type">Type</span>=<span class="source_int">9</span>,Priority=<span class="source_int">15</span>,Delay=<span class="source_int">1</span>,Title=<span class="source_string">"German grenades"</span>,Hint=<span class="source_string">"The fuse of German grenades will begin burning as soon as you hit the %FIRE% or %ALTFIRE% button."</span>)
<a name="321"></a>     Hints(<span class="source_int">41</span>)=(<span class="source_type">Type</span>=<span class="source_int">10</span>,Priority=<span class="source_int">10</span>,Delay=<span class="source_int">1</span>,Title=<span class="source_string">"Deploying MG"</span>,Hint=<span class="source_string">"To fire your Machine Gun properly, you need to deploy it. You can do this while prone or on any convenient surface: the deployment icon will appear in the bottom right corner of the HUD. Press %Deploy% to deploy when you see the icon."</span>)
<a name="322"></a>     Hints(<span class="source_int">42</span>)=(<span class="source_type">Type</span>=<span class="source_int">18</span>,Priority=<span class="source_int">40</span>,Title=<span class="source_string">"Melee Attacks"</span>,Hint=<span class="source_string">"You can bash an enemy soldier with your weapon by pressing the %ALTFIRE% button. The longer you keep the key pressed, the more powerful your attack will be. Aim for the head for a quick kill!"</span>)
<a name="323"></a>     Hints(<span class="source_int">43</span>)=(<span class="source_type">Type</span>=<span class="source_int">18</span>,Priority=<span class="source_int">40</span>,Title=<span class="source_string">"Manual Bolting"</span>,Hint=<span class="source_string">"When using a bolt-action rifle, you have to manually work your bolt. After you fire your weapon, press the %FIRE% key again to bolt your rifle. Double click the key when firing to bolt quickly after your shot."</span>)
<a name="324"></a>     Hints(<span class="source_int">44</span>)=(<span class="source_type">Type</span>=<span class="source_int">18</span>,Priority=<span class="source_int">40</span>,Title=<span class="source_string">"Critical Messages"</span>,Hint=<span class="source_string">"Critical messages are displayed in the upper left corner of the screen. Pay attention to them to remain aware of the state of the battle."</span>)
<a name="325"></a>     RandomHintTimerDelay=<span class="source_int">29.000000</span>
<a name="326"></a>}
<a name="327"></a></pre></td></tr></table></div>
<hr />
<table class="header">
<tr class="header">
	<td class="header"><a href="../overview.html">Overview</a></td>
	<td class="header"><a href="../roengine/roengine-overview.html">Package</a></td>
	<td class="header"><a href="../roengine/rohintmanager.html">Class</a></td>
	<td class="header_hilight">Source</td>
	<td class="header"><a class="header" href="../classtree.html#ROHintManager">Class tree</a></td>
	<td class="header"><a class="header" href="../glossary_A.html">Glossary</a></td>
	<td class="logo" rowspan="2">UnrealScript<br />Documentation</td>
</tr>
<tr>
	<td class="subheader" colspan="3"><a href="../Source_roengine/roheadgear.html">previous class</a> &nbsp;&nbsp;&nbsp;&nbsp; <a href="../Source_roengine/rohovercraft.html">next class</a></td>
	<td class="subheader" colspan="2"><a href="../index.html" target="_top">frames</a> &nbsp;&nbsp;&nbsp;&nbsp; <a href="" target="_top">no frames</a></td>
</tr>
</table>

<div class="stats">Class file time: Fri 13-10-2023 03:17:28.000 - Creation time: Fri 13-10-2023 03:19:06.983 - Created with <a href="http://wiki.beyondunreal.com/wiki/UnCodeX" target="_blank">UnCodeX</a></div>

</body>
</html>