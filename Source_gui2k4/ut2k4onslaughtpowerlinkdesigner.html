<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
	<title>UnCodeX - Source: GUI2K4.UT2K4OnslaughtPowerLinkDesigner</title>
	<meta name="Generator" content="UnCodeX 241" />
	<link rel="stylesheet" href="../DocStyle2.css" type="text/css" title="Original Purple" />
	<link rel="alternative stylesheet" href="../DocStyle2-blue.css" type="text/css" title="Blue" />
	<link rel="alternative stylesheet" href="../DocStyle2-red.css" type="text/css" title="Red" />
	<!--[if IE]>
	<link rel="stylesheet" href="../DocStyle2-msie.css" type="text/css" />
	<![endif]-->
	<script src="../styleswitcher.js" type="text/javascript"></script>
</head>
<body>

<div class="header">
<table class="header">
<tr class="header">
	<td class="header"><a href="../overview.html">Overview</a></td>
	<td class="header"><a href="../gui2k4/gui2k4-overview.html">Package</a></td>
	<td class="header"><a href="../gui2k4/ut2k4onslaughtpowerlinkdesigner.html">Class</a></td>
	<td class="header_hilight">Source</td>
	<td class="header"><a class="header" href="../classtree.html#UT2K4OnslaughtPowerLinkDesigner">Class tree</a></td>
	<td class="header"><a class="header" href="../glossary_A.html">Glossary</a></td>
	<td class="logo" rowspan="2">UnrealScript<br />Documentation</td>
</tr>
<tr>
	<td class="subheader" colspan="3"><a href="../Source_gui2k4/ut2k4onslaughtloginmenu.html">previous class</a> &nbsp;&nbsp;&nbsp;&nbsp; <a href="../Source_gui2k4/ut2k4ownage.html">next class</a></td>
	<td class="subheader" colspan="2"><a href="../index.html#Source_gui2k4/ut2k4onslaughtpowerlinkdesigner.html" target="_top">frames</a> &nbsp;&nbsp;&nbsp;&nbsp; <a href="" target="_top">no frames</a></td>
</tr>
</table>
</div>
<div class="spacer"></div>

<h1><a href="../gui2k4/gui2k4-overview.html">GUI2K4</a>.<a href="../gui2k4/ut2k4onslaughtpowerlinkdesigner.html">UT2K4OnslaughtPowerLinkDesigner</a></h1>
<br />
<div class="source"><table class="source"><tr><td class="source_lineno"><span class="source_lineno">00001<br />00002<br />00003<br />00004<br />00005<br />00006<br />00007<br />00008<br />00009<br />00010<br />00011<br />00012<br />00013<br />00014<br />00015<br />00016<br />00017<br />00018<br />00019<br />00020<br />
00021<br />00022<br />00023<br />00024<br />00025<br />00026<br />00027<br />00028<br />00029<br />00030<br />00031<br />00032<br />00033<br />00034<br />00035<br />00036<br />00037<br />00038<br />00039<br />00040<br />
00041<br />00042<br />00043<br />00044<br />00045<br />00046<br />00047<br />00048<br />00049<br />00050<br />00051<br />00052<br />00053<br />00054<br />00055<br />00056<br />00057<br />00058<br />00059<br />00060<br />
00061<br />00062<br />00063<br />00064<br />00065<br />00066<br />00067<br />00068<br />00069<br />00070<br />00071<br />00072<br />00073<br />00074<br />00075<br />00076<br />00077<br />00078<br />00079<br />00080<br />
00081<br />00082<br />00083<br />00084<br />00085<br />00086<br />00087<br />00088<br />00089<br />00090<br />00091<br />00092<br />00093<br />00094<br />00095<br />00096<br />00097<br />00098<br />00099<br />00100<br />
00101<br />00102<br />00103<br />00104<br />00105<br />00106<br />00107<br />00108<br />00109<br />00110<br />00111<br />00112<br />00113<br />00114<br />00115<br />00116<br />00117<br />00118<br />00119<br />00120<br />
00121<br />00122<br />00123<br />00124<br />00125<br />00126<br />00127<br />00128<br />00129<br />00130<br />00131<br />00132<br />00133<br />00134<br />00135<br />00136<br />00137<br />00138<br />00139<br />00140<br />
00141<br />00142<br />00143<br />00144<br />00145<br />00146<br />00147<br />00148<br />00149<br />00150<br />00151<br />00152<br />00153<br />00154<br />00155<br />00156<br />00157<br />00158<br />00159<br />00160<br />
00161<br />00162<br />00163<br />00164<br />00165<br />00166<br />00167<br />00168<br />00169<br />00170<br />00171<br />00172<br />00173<br />00174<br />00175<br />00176<br />00177<br />00178<br />00179<br />00180<br />
00181<br />00182<br />00183<br />00184<br />00185<br />00186<br />00187<br />00188<br />00189<br />00190<br />00191<br />00192<br />00193<br />00194<br />00195<br />00196<br />00197<br />00198<br />00199<br />00200<br />
00201<br />00202<br />00203<br />00204<br />00205<br />00206<br />00207<br />00208<br />00209<br />00210<br />00211<br />00212<br />00213<br />00214<br />00215<br />00216<br />00217<br />00218<br />00219<br />00220<br />
00221<br />00222<br />00223<br />00224<br />00225<br />00226<br />00227<br />00228<br />00229<br />00230<br />00231<br />00232<br />00233<br />00234<br />00235<br />00236<br />00237<br />00238<br />00239<br />00240<br />
00241<br />00242<br />00243<br />00244<br />00245<br />00246<br />00247<br />00248<br />00249<br />00250<br />00251<br />00252<br />00253<br />00254<br />00255<br />00256<br />00257<br />00258<br />00259<br />00260<br />
00261<br />00262<br />00263<br />00264<br />00265<br />00266<br />00267<br />00268<br />00269<br />00270<br />00271<br />00272<br />00273<br />00274<br />00275<br />00276<br />00277<br />00278<br />00279<br />00280<br />
00281<br />00282<br />00283<br />00284<br />00285<br />00286<br />00287<br />00288<br />00289<br />00290<br />00291<br />00292<br />00293<br />00294<br />00295<br />00296<br />00297<br />00298<br />00299<br />00300<br />
00301<br />00302<br />00303<br />00304<br />00305<br />00306</span></td>
<td class="source"><pre class="source"><a name="1"></a><span class="source_comment">// ====================================================================
</span><a name="2"></a><span class="source_comment">// Onslaught PowerLink Designer - page for creating custom powercore link setups
</span><a name="3"></a><span class="source_comment">//
</span><a name="4"></a><span class="source_comment">// Written by Matt Oelfke
</span><a name="5"></a><span class="source_comment">// (C) 2003, Epic Games, Inc. All Rights Reserved
</span><a name="6"></a><span class="source_comment">// ====================================================================
</span><a name="7"></a>
<a name="8"></a><span class="source_type">class</span> <span class="source_type"><a href="../gui2k4/ut2k4onslaughtpowerlinkdesigner.html" class="source">UT2K4OnslaughtPowerLinkDesigner</a></span> extends <span class="source_type"><a href="../gui2k4/largewindow.html" class="source">LargeWindow</a></span>;
<a name="9"></a>
<a name="10"></a><span class="source_comment">// Commented out UT2k4Merge - Ramm
</span><a name="11"></a><span class="source_comment">/*
<a name="12"></a>
<a name="13"></a>var automated GUIImage          i_Map;
<a name="14"></a>var automated moComboBox        co_SetupName;
<a name="15"></a>var automated GUIButton         b_DeleteSetup, b_SaveSetup, b_lClose, b_Clear, b_Export;
<a name="16"></a>
<a name="17"></a>var float OnslaughtMapCenterX, OnslaughtMapCenterY, OnslaughtMapRadius;
<a name="18"></a>var ONSPlayerReplicationInfo PRI;
<a name="19"></a>var ONSPowerCore SelectedCore;
<a name="20"></a>var string SetupName; //name of setup we're currently editing
<a name="21"></a>
<a name="22"></a>function InitComponent(GUIController MyController, GUIComponent MyOwner)
<a name="23"></a>{
<a name="24"></a>	Super.InitComponent(MyController, MyOwner);
<a name="25"></a>
<a name="26"></a>	//fill setup name combobox
<a name="27"></a>	PRI = ONSPlayerReplicationInfo(PlayerOwner().PlayerReplicationInfo);
<a name="28"></a>	if (PRI != None)
<a name="29"></a>	{
<a name="30"></a>		PRI.UpdateGUIMapLists = UpdateGUIMapLists;
<a name="31"></a>		PRI.ProcessSetupName = AddSetupName;
<a name="32"></a>		PRI.RemoveSetupName = RemoveSetupName;
<a name="33"></a>		PRI.SetCurrentSetup = SetCurrentSetup;
<a name="34"></a>		PRI.ServerSendSetupNames();
<a name="35"></a>	}
<a name="36"></a>
<a name="37"></a>	co_SetupName.MyComboBox.List.OnClick = InternalListClick;
<a name="38"></a>	b_Export.ToolTip.ExpirationSeconds = 10.0;
<a name="39"></a>}
<a name="40"></a>
<a name="41"></a>function bool ShouldAnimate(GUIComponent C, optional bool bSetup)
<a name="42"></a>{
<a name="43"></a>	return false;
<a name="44"></a>}
<a name="45"></a>
<a name="46"></a>function AddSetupName(string SetupName)
<a name="47"></a>{
<a name="48"></a>	if (SetupName == "")
<a name="49"></a>	{
<a name="50"></a>		if (co_SetupName.ItemCount() == 0)
<a name="51"></a>			co_SetupName.AddItem("Custom");
<a name="52"></a>	}
<a name="53"></a>	else
<a name="54"></a>	{
<a name="55"></a>		co_SetupName.AddItem(SetupName);
<a name="56"></a>		co_SetupName.OnChange(co_SetupName);
<a name="57"></a>	}
<a name="58"></a>
<a name="59"></a>	EnableComponent(b_SaveSetup);
<a name="60"></a>	EnableComponent(co_SetupName);
<a name="61"></a>}
<a name="62"></a>
<a name="63"></a>function RemoveSetupName(string SetupName)
<a name="64"></a>{
<a name="65"></a>	co_SetupName.RemoveItem(co_SetupName.FindIndex(SetupName, true));
<a name="66"></a>}
<a name="67"></a>
<a name="68"></a>function UpdateGUIMapLists()
<a name="69"></a>{
<a name="70"></a>	local UT2K4GamePageBase Page;
<a name="71"></a>
<a name="72"></a>	Page = UT2K4GamePageBase(Controller.FindPersistentMenuByClass(class'UT2K4GamePageBase'));
<a name="73"></a>	if ( Page != None && Page.p_Main != None )
<a name="74"></a>		Page.p_Main.InitMaps();
<a name="75"></a>}
<a name="76"></a>
<a name="77"></a>function SetCurrentSetup(string SetupName)
<a name="78"></a>{
<a name="79"></a>	co_SetupName.Find(SetupName, true);
<a name="80"></a>}
<a name="81"></a>
<a name="82"></a>function SetDefaultPosition()
<a name="83"></a>{
<a name="84"></a>	Super.SetDefaultPosition();
<a name="85"></a>
<a name="86"></a>	ResolutionChanged(0, 0);
<a name="87"></a>}
<a name="88"></a>
<a name="89"></a>function ResolutionChanged( int NewResX, int NewResY )
<a name="90"></a>{
<a name="91"></a>	OnslaughtMapCenterX = ActualLeft() + default.OnslaughtMapCenterX * ActualWidth();
<a name="92"></a>	OnslaughtMapCenterY = ActualTop() + default.OnslaughtMapCenterY * ActualHeight();
<a name="93"></a>	OnslaughtMapRadius = default.OnslaughtMapRadius * ActualWidth();
<a name="94"></a>
<a name="95"></a>	Super.ResolutionChanged(NewResX,NewResY);
<a name="96"></a>}
<a name="97"></a>
<a name="98"></a>function bool DrawMap(Canvas Canvas)
<a name="99"></a>{
<a name="100"></a>	local ONSHUDOnslaught ONSHUD;
<a name="101"></a>
<a name="102"></a>	ONSHUD = ONSHudOnslaught(PlayerOwner().myHUD);
<a name="103"></a>	if ( ONSHUD == None )
<a name="104"></a>		return True;
<a name="105"></a>
<a name="106"></a>	ONSHUD.DrawRadarMap(Canvas, OnslaughtMapCenterX, OnslaughtMapCenterY, OnslaughtMapRadius, true);
<a name="107"></a>	if ( SelectedCore != None )
<a name="108"></a>		ONSHUD.DrawSpawnIcon(Canvas, SelectedCore.HUDLocation, false, ONSHUD.IconScale, ONSHUD.HUDScale);
<a name="109"></a>
<a name="110"></a>	Canvas.SetPos(OnslaughtMapCenterX - OnslaughtMapRadius, OnslaughtMapCenterY - OnslaughtMapRadius);
<a name="111"></a>	Canvas.DrawBox( Canvas, OnslaughtMapRadius * 2, OnslaughtMapRadius * 2);
<a name="112"></a>
<a name="113"></a>	return true;
<a name="114"></a>}
<a name="115"></a>
<a name="116"></a>function bool InternalOnClick(GUIComponent Sender)
<a name="117"></a>{
<a name="118"></a>	if (PRI == None)
<a name="119"></a>		return true;
<a name="120"></a>
<a name="121"></a>	if ( Sender == b_SaveSetup )
<a name="122"></a>	{
<a name="123"></a>		if ( co_SetupName.GetText() != "" )
<a name="124"></a>			PRI.ServerSavePowerLinkSetup(co_SetupName.GetText());
<a name="125"></a>	}
<a name="126"></a>	else if (Sender == b_DeleteSetup)
<a name="127"></a>	{
<a name="128"></a>		PRI.ServerDeletePowerLinkSetup(co_SetupName.GetText());
<a name="129"></a>	}
<a name="130"></a>	else if (Sender == b_lClose)
<a name="131"></a>		Controller.CloseMenu(false);
<a name="132"></a>	else if (Sender == b_Clear)
<a name="133"></a>		PRI.ServerClearPowerLinks();
<a name="134"></a>	else if (Sender == b_Export)
<a name="135"></a>		PlayerOwner().ConsoleCommand("CopyLinkSetup");
<a name="136"></a>
<a name="137"></a>	return true;
<a name="138"></a>}
<a name="139"></a>
<a name="140"></a>function InternalOnChange(GUIComponent Sender)
<a name="141"></a>{
<a name="142"></a>	if (Sender == co_SetupName)
<a name="143"></a>	{
<a name="144"></a>		if (co_SetupName.FindIndex(co_SetupName.GetText(), true) != -1)
<a name="145"></a>			EnableComponent(b_DeleteSetup);
<a name="146"></a>		else
<a name="147"></a>			DisableComponent(b_DeleteSetup);
<a name="148"></a>	}
<a name="149"></a>}
<a name="150"></a>
<a name="151"></a>function bool InternalListClick(GUIComponent Sender)
<a name="152"></a>{
<a name="153"></a>	co_SetupName.MyComboBox.InternalListClick(Sender);
<a name="154"></a>	if (!co_SetupName.MyComboBox.List.bVisible && ONSPlayerReplicationInfo(PlayerOwner().PlayerReplicationInfo) != None)
<a name="155"></a>	{
<a name="156"></a>		ONSPlayerReplicationInfo(PlayerOwner().PlayerReplicationInfo).ServerSetPowerLinkSetup(co_SetupName.GetText());
<a name="157"></a>		ONSHudOnslaught(PlayerOwner().myHUD).RequestPowerLinks();
<a name="158"></a>	}
<a name="159"></a>
<a name="160"></a>	return true;
<a name="161"></a>}
<a name="162"></a>
<a name="163"></a>function InternalOnMouseReleased( GUIComponent Sender )
<a name="164"></a>{
<a name="165"></a>	local ONSPowerCore Core;
<a name="166"></a>	local ONSHudOnslaught ONSHUD;
<a name="167"></a>
<a name="168"></a>	if ( Sender == Self )
<a name="169"></a>	{
<a name="170"></a>		ONSHUD = ONSHudOnslaught(PlayerOwner().myHUD);
<a name="171"></a>		Core = ONSHUD.LocatePowerCore(Controller.MouseX - OnslaughtMapCenterX, Controller.MouseY - OnslaughtMapCenterY, OnslaughtMapRadius);
<a name="172"></a>		if (Core != None)
<a name="173"></a>		{
<a name="174"></a>			if (SelectedCore == None)
<a name="175"></a>				SelectedCore = Core;
<a name="176"></a>			else
<a name="177"></a>			{
<a name="178"></a>				if ( ONSHUD.HasLink(Core, SelectedCore) )
<a name="179"></a>					PRI.ServerRemovePowerLink(SelectedCore, Core);
<a name="180"></a>				else
<a name="181"></a>					PRI.ServerReceivePowerLink(SelectedCore, Core);
<a name="182"></a>
<a name="183"></a>				SelectedCore = None;
<a name="184"></a>			}
<a name="185"></a>		}
<a name="186"></a>	}
<a name="187"></a>}
<a name="188"></a>
<a name="189"></a>function Free()
<a name="190"></a>{
<a name="191"></a>	if (PRI != None)
<a name="192"></a>	{
<a name="193"></a>		PRI.UpdateGUIMapLists = None;
<a name="194"></a>		PRI.ProcessSetupName = None;
<a name="195"></a>		PRI.SetCurrentSetup = None;
<a name="196"></a>	}
<a name="197"></a>
<a name="198"></a>	PRI = None;
<a name="199"></a>	SelectedCore = None;
<a name="200"></a>	super.Free();
<a name="201"></a>}
<a name="202"></a>
<a name="203"></a>defaultproperties
<a name="204"></a>{
<a name="205"></a>	OnslaughtMapCenterX=0.5
<a name="206"></a>	OnslaughtMapCenterY=0.475
<a name="207"></a>	OnslaughtMapRadius=0.30
<a name="208"></a>
<a name="209"></a>	Begin Object Class=GUIToolTip Name=MapToolTip
<a name="210"></a>		ExpirationSeconds=5.0
<a name="211"></a>	End Object
<a name="212"></a>	ToolTip=MapToolTip
<a name="213"></a>	Hint="Click on any PowerCore or PowerNode to select it, then click on another PowerCore or PowerNode to create a link between the two."
<a name="214"></a>
<a name="215"></a>	Begin Object Class=GUIImage Name=LinkDesignerMap
<a name="216"></a>		Image=Material'MenuWhite'
<a name="217"></a>		ImageRenderStyle=MSTY_Normal
<a name="218"></a>		OnDraw=DrawMap
<a name="219"></a>		Hint="Click on any PowerCore or PowerNode to select it, then click on another PowerCore or PowerNode to create a link between the two."
<a name="220"></a>	End Object
<a name="221"></a>	i_Map=LinkDesignerMap
<a name="222"></a>
<a name="223"></a>	Begin Object Class=moComboBox Name=SetupNameBox
<a name="224"></a>		WinWidth=0.400000
<a name="225"></a>		WinHeight=0.030000
<a name="226"></a>		WinLeft=0.300000
<a name="227"></a>		WinTop=0.094531
<a name="228"></a>		CaptionWidth=0.25
<a name="229"></a>		Caption="Name"
<a name="230"></a>		Hint="The name of this Link Setup. Type a name and click Save to create a new link setup."
<a name="231"></a>		OnChange=InternalOnChange
<a name="232"></a>		MenuState=MSAT_Disabled
<a name="233"></a>	End Object
<a name="234"></a>	co_SetupName=SetupNameBox
<a name="235"></a>
<a name="236"></a>	Begin Object Class=GUIButton Name=DeleteSetupButton
<a name="237"></a>		WinTop=0.155
<a name="238"></a>		WinLeft=0.3
<a name="239"></a>		WinWidth=0.15
<a name="240"></a>		WinHeight=0.05
<a name="241"></a>		Caption="Delete"
<a name="242"></a>		Hint="Delete the currently selected Link Setup."
<a name="243"></a>		OnClick=InternalOnClick
<a name="244"></a>		MenuState=MSAT_Disabled
<a name="245"></a>	End Object
<a name="246"></a>	b_DeleteSetup=DeleteSetupButton
<a name="247"></a>
<a name="248"></a>	Begin Object Class=GUIButton Name=SaveSetupButton
<a name="249"></a>		WinTop=0.155
<a name="250"></a>		WinLeft=0.55
<a name="251"></a>		WinWidth=0.15
<a name="252"></a>		WinHeight=0.05
<a name="253"></a>		Caption="Save"
<a name="254"></a>		Hint="Save the current Link Setup."
<a name="255"></a>		OnClick=InternalOnClick
<a name="256"></a>		MenuState=MSAT_Disabled
<a name="257"></a>	End Object
<a name="258"></a>	b_SaveSetup=SaveSetupButton
<a name="259"></a>
<a name="260"></a>	Begin Object Class=GUIButton Name=CloseButton
<a name="261"></a>		WinWidth=0.150000
<a name="262"></a>		WinHeight=0.050000
<a name="263"></a>		WinLeft=0.425000
<a name="264"></a>		WinTop=0.861979
<a name="265"></a>		Caption="Close"
<a name="266"></a>		OnClick=InternalOnClick
<a name="267"></a>	End Object
<a name="268"></a>	b_lClose=CloseButton
<a name="269"></a>
<a name="270"></a>	Begin Object Class=GUIButton Name=ClearButton
<a name="271"></a>		WinWidth=0.200000
<a name="272"></a>		WinHeight=0.050000
<a name="273"></a>		WinLeft=0.400000
<a name="274"></a>		WinTop=0.731979
<a name="275"></a>		Caption="Clear Links"
<a name="276"></a>		Hint="Clear all links on the map."
<a name="277"></a>		OnClick=InternalOnClick
<a name="278"></a>	End Object
<a name="279"></a>	b_Clear=ClearButton
<a name="280"></a>
<a name="281"></a>	Begin Object Class=GUIButton Name=ExportButton
<a name="282"></a>		WinWidth=0.200000
<a name="283"></a>		WinHeight=0.050000
<a name="284"></a>		WinLeft=0.400000
<a name="285"></a>		WinTop=0.791979
<a name="286"></a>		Caption="Export to UnrealEd"
<a name="287"></a>		Hint="LEVEL DESIGNERS ONLY: Export the current Link Setup to the clipboard. You can then open the map in UnrealEd and use Paste to create an Official Link Setup actor, making this Link Setup an Official Link Setup for your map."
<a name="288"></a>		OnClick=InternalOnClick
<a name="289"></a>	End Object
<a name="290"></a>	b_Export=ExportButton
<a name="291"></a>
<a name="292"></a>	OnMouseRelease=InternalOnMouseReleased
<a name="293"></a>
<a name="294"></a>	WinLeft=0.2
<a name="295"></a>	WinWidth=0.6
<a name="296"></a>	WinTop=0.05
<a name="297"></a>	WinHeight=0.9
<a name="298"></a>
<a name="299"></a>	bAllowedAsLast=true
<a name="300"></a>	bRenderWorld=true
<a name="301"></a>}  */</span>
<a name="302"></a>
<a name="303"></a>defaultproperties
<a name="304"></a>{
<a name="305"></a>}
<a name="306"></a></pre></td></tr></table></div>
<hr />
<table class="header">
<tr class="header">
	<td class="header"><a href="../overview.html">Overview</a></td>
	<td class="header"><a href="../gui2k4/gui2k4-overview.html">Package</a></td>
	<td class="header"><a href="../gui2k4/ut2k4onslaughtpowerlinkdesigner.html">Class</a></td>
	<td class="header_hilight">Source</td>
	<td class="header"><a class="header" href="../classtree.html#UT2K4OnslaughtPowerLinkDesigner">Class tree</a></td>
	<td class="header"><a class="header" href="../glossary_A.html">Glossary</a></td>
	<td class="logo" rowspan="2">UnrealScript<br />Documentation</td>
</tr>
<tr>
	<td class="subheader" colspan="3"><a href="../Source_gui2k4/ut2k4onslaughtloginmenu.html">previous class</a> &nbsp;&nbsp;&nbsp;&nbsp; <a href="../Source_gui2k4/ut2k4ownage.html">next class</a></td>
	<td class="subheader" colspan="2"><a href="../index.html" target="_top">frames</a> &nbsp;&nbsp;&nbsp;&nbsp; <a href="" target="_top">no frames</a></td>
</tr>
</table>

<div class="stats">Class file time: Fri 13-10-2023 03:17:26.000 - Creation time: Fri 13-10-2023 03:19:10.069 - Created with <a href="http://wiki.beyondunreal.com/wiki/UnCodeX" target="_blank">UnCodeX</a></div>

</body>
</html>